<div style="text-align:center; max-width:700px; margin: 0 auto;">
  <h1 style="color: #0d47a1; text-align:center; margin-bottom:0.6em;">–ë–ª–æ–≥–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h1>
  <p style="text-align:center; color:#555; margin-bottom:2em;">    –¢—É—Ç –∑‚Äô—è–≤–ª—è—Ç—å—Å—è –±–ª–æ–≥–∏ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –∞–±–æ —É–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –±–ª–æ–≥!
  </p>
  <% if user_signed_in? %>
    <%= link_to '–°—Ç–≤–æ—Ä–∏—Ç–∏ –±–ª–æ–≥', new_blog_path, class: 'btn btn-success', style: 'font-size:1.1em; padding:0.6em 2em; border-radius:8px; background:#1976d2; color:#fff; text-decoration:none;' %>
  <% else %>
    <span style="color:#888;">–£–≤—ñ–π–¥—ñ—Ç—å –∞–±–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è, —â–æ–± –¥–æ–¥–∞—Ç–∏ —Å–≤—ñ–π –±–ª–æ–≥.</span>
  <% end %>

  <div style="max-width:700px; margin:2em auto 0 auto;">
    <% if @blogs.present? %>
      <% @blogs.each do |blog| %>
        <div class="card" style="background:#fff; border:1px solid #e3e6ea; border-radius:12px; box-shadow:0 2px 8px rgba(30,60,90,0.06); margin-bottom:1.7em; padding:1.5em 2em;">
          <div style="display:flex; align-items:center; gap:1em; margin-bottom:0.7em;">
            <span style="font-size:1.35em; color:var(--accent); font-weight:600;"> <%= blog.title %> </span>
          </div>
          <div style="color:#333; margin-bottom:1.1em; white-space:pre-line;">
            <%= blog.body %>
          </div>
          <div style="color:#888; font-size:0.97em; display:flex; justify-content:space-between; align-items:center;">
            <span>–ê–≤—Ç–æ—Ä: <%= blog.user&.email || '–ì—ñ—Å—Ç—å' %></span>
            <span><%= l(blog.created_at, format: :short) %></span>
            <% if user_signed_in? && (blog.user == current_user || current_user.admin?) %>
              <span style="display:flex; gap:0.5em; margin-left:1em;">
                <%= link_to '–†–µ–¥–∞–≥—É–≤–∞—Ç–∏', edit_blog_path(blog), class: 'btn', style: 'background:var(--accent); color:#fff; border-radius:8px; padding:0.4em 1.3em; font-size:0.98em; min-width:90px; margin-left:0; text-decoration:none; line-height:1; height:auto; vertical-align:middle;' %>
                <%= button_to '–í–∏–¥–∞–ª–∏—Ç–∏', blog_path(blog), method: :delete, data: { confirm: '–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –±–ª–æ–≥?' }, class: 'btn', style: 'background:#c00; color:#fff; border-radius:8px; padding:0.4em 1.3em; font-size:0.98em; min-width:90px; margin-left:0; text-decoration:none; line-height:1; height:auto; vertical-align:middle;' %>
              </span>
            <% end %>
          </div>
          <!-- –õ–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏ -->
          <div style="margin:0.7em 0 0.2em 0; display:flex; align-items:center; gap:1em;">
            <%= form_with url: blog_likes_path(blog), method: :post, local: true, style: 'display:inline;' do %>
              <%= hidden_field_tag :value, 1 %>
              <button type="submit" class="like-btn" style="background:#2196f3; color:#fff; border:none; border-radius:5px; padding:0.3em 1.1em; margin-right:0.6em; font-size:1em; cursor:pointer; transition:filter .18s;">üëç <%= blog.likes.where(value: 1).count %></button>
            <% end %>
            <%= form_with url: blog_likes_path(blog), method: :post, local: true, style: 'display:inline;' do %>
              <%= hidden_field_tag :value, -1 %>
              <button type="submit" class="dislike-btn" style="background:#e53935; color:#fff; border:none; border-radius:5px; padding:0.3em 1.1em; font-size:1em; cursor:pointer; transition:filter .18s;">üëé <%= blog.likes.where(value: -1).count %></button>
            <% end %>
          </div>

          <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
          <div style="margin-top:1.4em; background:#f7fafd; border-radius:8px; padding:1em 1.3em;">
            <div style="font-weight:600; color:var(--accent); margin-bottom:0.5em;">–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ:</div>
            <% blog.comments.each do |comment| %>
              <div style="margin-bottom:0.7em; border-bottom:1px solid #e3e6ea; padding-bottom:0.5em; font-size:0.98em;">
                <span style="color:#1976d2; font-weight:500;"><%= comment.user&.email || '–ì—ñ—Å—Ç—å' %>:</span>
                <%= comment.body %>
                <% if user_signed_in? && comment.user == current_user %>
                  <%= button_to '–í–∏–¥–∞–ª–∏—Ç–∏', blog_comment_path(blog, comment), method: :delete, data: { confirm: '–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä?' }, class: 'btn btn-outline', style: 'margin-left:1em; padding:0.18em 0.9em; font-size:0.95em;' %>
                <% end %>
              </div>
            <% end %>
            <% if user_signed_in? %>
              <%= form_with model: [blog, Comment.new], local: true do |f| %>
                <div style="display:flex; gap:0.7em; align-items:center; margin-top:0.7em;">
                  <%= f.text_field :body, required: true, maxlength: 1000, placeholder: '–ó–∞–ª–∏—à–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä...', style: 'flex:1; padding:0.5em; border-radius:5px; border:1px solid #b3c6e0;' %>
                  <%= f.submit '–î–æ–¥–∞—Ç–∏', class: 'btn', style: 'background:var(--accent); color:#fff; border-radius:6px; padding:0.45em 1.4em; font-size:1em; border:none;' %>
                </div>
              <% end %>
            <% else %>
              <div style="color:#888; font-size:0.96em; margin-top:0.5em;">–£–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± –∑–∞–ª–∏—à–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä.</div>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <div style="text-align:center; color:#888; margin-top:2em;">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ–≥–æ –±–ª–æ–≥—É.</div>
    <% end %>
  </div>
</div>
